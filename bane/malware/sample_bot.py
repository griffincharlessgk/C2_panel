#!/usr/bin/env python3
"""
Sample Bot Agent
This is a simple bot agent for testing purposes
"""

import socket
import time
import json

class SampleBot:
    def __init__(self, c2_host, c2_port):
        self.c2_host = c2_host
        self.c2_port = c2_port
        self.socket = None
        
    def connect(self):
        """Connect to C2 server"""
        try:
            self.socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
            self.socket.connect((self.c2_host, self.c2_port))
            print(f"‚úÖ Connected to C2 server {self.c2_host}:{self.c2_port}")
            return True
        except Exception as e:
            print(f"‚ùå Failed to connect: {e}")
            return False
    
    def send_heartbeat(self):
        """Send heartbeat to C2 server"""
        if self.socket:
            try:
                heartbeat = {
                    "type": "heartbeat",
                    "timestamp": time.time(),
                    "status": "alive"
                }
                self.socket.send(json.dumps(heartbeat).encode())
                print("üíì Heartbeat sent")
            except Exception as e:
                print(f"‚ùå Failed to send heartbeat: {e}")
    
    def run(self):
        """Main bot loop"""
        if not self.connect():
            return
        
        print("ü§ñ Bot agent started")
        
        try:
            while True:
                self.send_heartbeat()
                time.sleep(30)  # Send heartbeat every 30 seconds
        except KeyboardInterrupt:
            print("\nüëã Bot agent stopped")
        finally:
            if self.socket:
                self.socket.close()

if __name__ == "__main__":
    # Configuration
    C2_HOST = "localhost"  # Change to your C2 server IP
    C2_PORT = 7777         # Bot connection port
    
    bot = SampleBot(C2_HOST, C2_PORT)
    bot.run()
